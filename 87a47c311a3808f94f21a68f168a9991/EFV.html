<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="utf-8" /&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width,initial-scale=1" /&gt;</p>
<p class="p1">&lt;title&gt;Butcher Sustainability Trainer — All Levels&lt;/title&gt;</p>
<p class="p1">&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>:root{</p>
<p class="p1"><span class="Apple-converted-space">    </span>--overlay-bg: rgba(255,255,255,0.92);</p>
<p class="p1"><span class="Apple-converted-space">    </span>--accent: #c33;</p>
<p class="p1"><span class="Apple-converted-space">    </span>--accent-2: #2b8a3e;</p>
<p class="p1"><span class="Apple-converted-space">    </span>--text: #222;</p>
<p class="p1"><span class="Apple-converted-space">    </span>--muted: #555;</p>
<p class="p1"><span class="Apple-converted-space">    </span>--card-radius: 12px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>html,body{height:100%;margin:0;font-family:Inter,Arial, Helvetica, sans-serif;color:var(--text);}</p>
<p class="p1"><span class="Apple-converted-space">  </span>body{</p>
<p class="p1"><span class="Apple-converted-space">    </span>background: url('541e3f08-896b-4431-b7eb-bfe291bfa25d.png') center/cover no-repeat fixed;</p>
<p class="p1"><span class="Apple-converted-space">    </span>-webkit-font-smoothing:antialiased;</p>
<p class="p1"><span class="Apple-converted-space">    </span>-moz-osx-font-smoothing:grayscale;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:40px 20px;}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.card{width:100%;max-width:1100px;background:var(--overlay-bg);border-radius:var(--card-radius);box-shadow:0 10px 30px rgba(0,0,0,.15);padding:26px;}</p>
<p class="p1"><span class="Apple-converted-space">  </span>header{display:flex;gap:18px;align-items:center;flex-wrap:wrap;justify-content:space-between}</p>
<p class="p1"><span class="Apple-converted-space">  </span>h1{margin:0;font-size:1.6rem}</p>
<p class="p1"><span class="Apple-converted-space">  </span>p.lead{margin:0;color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.level-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.level-btn{padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:600;background:var(--accent);color:#fff;box-shadow:0 6px 16px rgba(195,51,51,.18);transition:transform .16s ease}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.level-btn:hover{transform:translateY(-3px)}</p>
<p class="p1"><span class="Apple-converted-space">  </span>main{display:grid;grid-template-columns:360px 1fr;gap:20px;margin-top:20px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>/* left column */</p>
<p class="p1"><span class="Apple-converted-space">  </span>.left{min-height:420px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.help-card{background:#f1fbff;border-radius:10px;padding:12px;border:1px solid #e1f4ff}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.help-card h3{margin:0 0 8px;font-size:1rem}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.help-card p{margin:0;color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.lang-help{margin-top:10px;font-size:0.95rem;line-height:1.45}</p>
<p class="p1"><span class="Apple-converted-space">  </span>/* right column */</p>
<p class="p1"><span class="Apple-converted-space">  </span>.right{background:#fff;border-radius:10px;padding:14px;box-shadow:0 6px 14px rgba(0,0,0,.04);min-height:420px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.situation{font-weight:700;padding:12px;border-radius:8px;background:#fbfbfd;border:1px solid #f0f0f5}</p>
<p class="p1"><span class="Apple-converted-space">  </span>textarea{width:100%;height:110px;padding:10px;border-radius:8px;border:1px solid #e6e6ea;margin-top:12px;font-size:0.98rem}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.actions{display:flex;gap:10px;align-items:center;margin-top:12px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.btn{padding:10px 14px;border-radius:8px;border:1px solid #d0d0d6;background:#fff;cursor:pointer}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.btn.primary{background:var(--accent);color:#fff;border:none}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.btn.secondary{background:var(--accent-2);color:#fff;border:none}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.solution{background:#fff8e6;padding:12px;border-radius:8px;margin-top:12px;border:1px solid #fff0d9;display:none}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.rating{display:none;margin-top:12px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.rating button{margin-right:8px;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.stats{margin-top:14px;font-size:0.95rem;color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.mc-options{margin-top:10px;display:flex;flex-direction:column;gap:8px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.mc-option{padding:10px;border-radius:8px;border:1px solid #e2e2ea;background:#fafafa;cursor:pointer}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.mc-option.selected{outline:3px solid rgba(43,138,62,0.12);background:#f0fff4}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.small{font-size:0.9rem;color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">  </span>footer{margin-top:18px;text-align:right;font-size:0.85rem;color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">  </span>/* emoji animation */</p>
<p class="p1"><span class="Apple-converted-space">  </span>.emoji{position:fixed;font-size:28px;pointer-events:none;z-index:1200;transform:translateY(-30px);opacity:0;transition:transform 1s cubic-bezier(.22,.9,.25,1),opacity 1s}</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1">&lt;div class="wrap"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="card" role="application" aria-label="Butcher Sustainability Trainer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;header&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1&gt;🌱 Butcher Sustainability Trainer&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p class="lead"&gt;Choose your level. Language help appears for the selected level. Read the situation, write your notes (or choose an option for MC in Level 1). Click &lt;strong&gt;Evaluate&lt;/strong&gt; to see suggested actions, then self-assess.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="level-row" role="tablist" aria-label="Select level"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="level-btn" data-level="A1"&gt;🟢 Level 1 • A1–A2&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="level-btn" data-level="B1"&gt;🟡 Level 2 • B1&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="level-btn" data-level="B2"&gt;🔵 Level 3 • B2–C1&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="level-btn" data-level="C2"&gt;🔴 Level 4 • Native&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;main&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;aside class="left"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="help-card" id="helpCard" aria-live="polite"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h3 id="helpTitle"&gt;Language Help&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;p class="small" id="helpIntro"&gt;Select a level to see context-sensitive sentence starters, vocabulary and tips.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div id="helpContent" class="lang-help" style="display:none"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style="height:18px"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="help-card" aria-hidden="false"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h3&gt;How it works&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;p class="small"&gt;Level 1 mixes multiple-choice and short writing tasks (approx. half MC). Other levels are free-writing only. After clicking &lt;strong&gt;Evaluate&lt;/strong&gt;, the correct/expected steps appear and you can mark your answer.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/aside&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;section class="right" aria-live="polite"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="levelInfo" style="display:flex;justify-content:space-between;align-items:center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="levelName" style="font-weight:700"&gt;Please choose a level&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="small" id="levelDesc"&gt;Language help is hidden until you select a level.&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="small" id="progressMini"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style="margin-top:12px"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div id="situationBox" class="situation"&gt;—&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;!-- MC area for Level 1 --&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div id="mcArea" class="mc-options" style="display:none"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;textarea id="answer" placeholder="Write your notes here... (short bullet points or sentence starters)"&gt;&lt;/textarea&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="actions"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn primary" id="evalBtn"&gt;Evaluate&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn" id="nextBtn" style="display:none"&gt;Next situation&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div style="flex:1"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="autoScore" class="small"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="solution" id="solutionBox" aria-hidden="true"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="rating" id="ratingBox"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="small"&gt;Self-assess your response:&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div style="margin-top:8px"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button class="btn" id="resRight" style="background:#2b8a3e;color:#fff"&gt;Correct&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button class="btn" id="resPartial" style="background:#ffb74d;color:#fff"&gt;Partly&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button class="btn" id="resWrong" style="background:#b0b0b6;color:#fff"&gt;Wrong&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="stats" id="statsBox"&gt;Answered: 0 | Correct: 0 | Partly: 0 | Wrong: 0&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/section&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/main&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;footer&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>Made for classroom practice — all texts adapted to CEFR levels.</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/footer&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Data: 50 base situations</p>
<p class="p1"><span class="Apple-converted-space">   </span>same for all levels; prompts/help adapted per level</p>
<p class="p1"><span class="Apple-converted-space">   </span>For Level 1: first 25 entries include MC options (4 options each)</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">const baseSituations = [</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:1, text:"A customer asks where the meat comes from and wants to know if it's local.", solution:"State origin, show local supplier info; recommend local cuts."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:2, text:"You have a batch of sausages that are close to expiry.", solution:"Check date, mark as 'reduced price', offer special deals, or cook into prepared products."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:3, text:"There is a lot of packaging waste after a delivery of small plastic trays.", solution:"Request larger reusable containers from supplier; switch to recyclable or compostable packaging."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:4, text:"Lights in the display counter are left on overnight.", solution:"Turn off non-essential lights, use timers or sensors, switch to energy-efficient bulbs."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:5, text:"You notice meat trims are thrown away while they could be used.", solution:"Collect trims for sausages, broths or pet food partners; label and store appropriately."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:6, text:"A supplier asks you to accept a bigger weekly delivery to save transport costs.", solution:"Plan stock usage, adjust storage, coordinate orders with production to prevent waste."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:7, text:"Customers ask for single-use plastic cutlery with ready-to-eat items.", solution:"Offer compostable cutlery, ask 'Do you need cutlery?', incentivize customers to bring reusable utensils."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:8, text:"A fridge shows a higher temperature alarm intermittently.", solution:"Check door seals, service the fridge, log temperatures and move perishable items if needed."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:9, text:"Staff uses many paper towels for cleaning counters.", solution:"Switch to washable cloths, establish cleaning protocols to reduce paper use."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:10, text:"There is leftover cooked chicken after a busy day.", solution:"Label with use-by, offer as discounted item next day, donate to local food bank if safe."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:11, text:"The store receives spices and condiments by air freight.", solution:"Source spices by sea freight or local alternatives to reduce carbon footprint."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:12, text:"A regular customer asks for smaller portion sizes to reduce waste.", solution:"Offer flexible portioning, sell by weight, use smaller packaging."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:13, text:"There is grease and fat going down sink drains.", solution:"Collect fats for recycling or rendering; avoid pouring into drains; engage proper disposal."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:14, text:"Packaging labels do not clearly state recycling instructions.", solution:"Update labels with recycling info, use simple icons, inform customers at counter."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:15, text:"The team uses old inefficient cutting machines.", solution:"Consider investing in energy-efficient equipment; schedule maintenance to improve efficiency."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:16, text:"You find pest droppings in dry goods storage.", solution:"Isolate stock, call pest control, check storage hygiene and rotation (FIFO)." },</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:17, text:"A supplier offers cheaper meat with less transparent animal welfare info.", solution:"Request documentation, prefer certified suppliers; explain choices to customers."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:18, text:"Several customers ask about vegetarian alternatives for events.", solution:"Develop plant-based options and communicate them in marketing."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:19, text:"Many small deliveries create high driving emissions.", solution:"Consolidate deliveries, plan routes, partner with nearby shops for joint logistics."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:20, text:"The shop disposes of bones without using them.", solution:"Use bones for stock, sell to pet food or fertilizer partners, or freeze &amp; process."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:21, text:"Staff are not trained in food waste separation.", solution:"Train staff, label bins, create simple waste sorting instructions."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:22, text:"An online order was overproduced and not picked up.", solution:"Contact customer, offer future discount, convert to prepared meals, or donate if safe."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:23, text:"Paper receipts are printed automatically for every purchase.", solution:"Ask customers if they want a receipt, offer digital receipts."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:24, text:"The shop uses single-use plastic wrap for all cuts.", solution:"Introduce reusable trays, compostable wraps or customer-bring containers."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:25, text:"A local farm asks to sell their meat through you but with variable weekly supply.", solution:"Create a seasonal menu, preorder system, and clear communication with customers."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:26, text:"The display case is overstocked and hides older products.", solution:"Organize by FIFO, mark older items clearly, create specials for older stock."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:27, text:"The store's website shows no sustainability information.", solution:"Add a sustainability page explaining sourcing, waste reduction, and certifications."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:28, text:"There is no plan for surplus cooked products.", solution:"Implement surplus plan: discounts, partnerships, freezing with labels."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:29, text:"Staff commute individually in cars for short distances.", solution:"Encourage biking, public transport, or shared rides; provide bike storage."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:30, text:"Customers often ask for extra packaging to avoid dripping.", solution:"Offer absorbent, recyclable inserts and explain lower-waste packaging options."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:31, text:"The shop receives overly packaged promotional samples.", solution:"Request minimal packaging or refuse unnecessary samples."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:32, text:"Fridge lighting uses old bulbs and gets hot.", solution:"Replace with LEDs, check heat production to save energy."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:33, text:"There are inconsistent portion sizes among staff.", solution:"Standardize portion sizes, use portioning tools to reduce waste."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:34, text:"The shop is considering a loyalty program to reward sustainable choices.", solution:"Design a program that rewards reusable containers and low-waste purchases."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:35, text:"A supplier's delivery has damaged packaging and spilled product.", solution:"Return or negotiate compensation, check stock, update receiving checks."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:36, text:"The team disposes of spoiled meat without documenting losses.", solution:"Track waste data to improve ordering and production planning."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:37, text:"The building's heating/AC runs all night.", solution:"Install timers, zone controls, and program reduced night settings."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:38, text:"Customers ask about animal welfare for specific cuts.", solution:"Provide transparent info and traceability where possible."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:39, text:"There is a plan to run a catering event but it may produce high waste.", solution:"Plan reusable options, estimate portions carefully, and set up waste collection."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:40, text:"The supplier uses single-use foam crates.", solution:"Ask about reusable crates or returnable systems."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:41, text:"The shop considers switching to a greener electricity provider.", solution:"Compare tariffs, verify green credentials, and start transition."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:42, text:"A promotional campaign offers free plastic bags.", solution:"Avoid freebies; offer alternatives or charge for bags."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:43, text:"The team is unsure how to store new vacuum-packed products.", solution:"Provide storage training and clear labeling with dates."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:44, text:"A customer complains about high prices for 'sustainable' items.", solution:"Explain costs and benefits, highlight quality and local support."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:45, text:"There is talk about installing an on-site composter.", solution:"Assess waste streams, costs, regulations and community partnerships."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:46, text:"Some staff take leftovers home without logging.", solution:"Introduce clear policy and logging to track and fairly distribute surplus."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:47, text:"The packaging supplier increases prices for recyclable materials.", solution:"Negotiate, consider alternative suppliers or phased transition."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:48, text:"The shop produces excess cooked sausages after a festival.", solution:"Label and freeze with dates, sell as specials, or partner with charities."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:49, text:"Customers request full traceability for premium products.", solution:"Implement simple traceability notes (farm, batch) and communicate."},</p>
<p class="p1"><span class="Apple-converted-space">  </span>{id:50, text:"There is opportunity to collaborate with other local shops to share waste pickup.", solution:"Organize a local network for joint waste or logistics solutions."}</p>
<p class="p1">];</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Level definitions &amp; language help (per situation)</p>
<p class="p1"><span class="Apple-converted-space">   </span>For Level1: first 25 scenarios have MC options</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">const levels = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>A1: { code:'A1', name:'Level 1 — A1/A2', description:'Simple notes or sentence starters. Mix of MC and short writing (approx. half MC).', helpIntro:'Simple sentence starters &amp; vocabulary appear below.', mcCount:25 },</p>
<p class="p1"><span class="Apple-converted-space">  </span>B1: { code:'B1', name:'Level 2 — B1', description:'Short reasoned action points in notes or short sentences. Free writing only.', helpIntro:'Short sentence frames and connectors appear below.' },</p>
<p class="p1"><span class="Apple-converted-space">  </span>B2: { code:'B2', name:'Level 3 — B2/C1', description:'Reflective and precise action steps with professional vocabulary. Free writing only.', helpIntro:'Advanced sentence patterns and functional vocabulary appear below.' },</p>
<p class="p1"><span class="Apple-converted-space">  </span>C2: { code:'C2', name:'Level 4 — Native', description:'Precise, professional, strategic steps with nuance. Free writing only.', helpIntro:'Professional style patterns and sophisticated vocabulary appear below.' }</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">/* MC options for first 25 baseSituations (simple plausible distractors) */</p>
<p class="p1">const mcOptions = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>1: ["Say 'I don't know'","Explain the origin and show local info","Tell them it's imported without details","Avoid the question"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>2: ["Throw everything away","Check dates; reduce price; cook or donate","Sell at full price","Ignore expiry"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>3: ["Keep using small trays","Ask supplier for reusable containers","Use more plastic","Hide the waste"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>4: ["Leave them on","Turn off non-essential lights / use timers","Use brighter bulbs","Ignore energy use"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>5: ["Throw trims in bin","Collect trims for sausages/stock","Give them to customers free","Burn them"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>6: ["Refuse all deliveries","Plan stock and production to use larger delivery","Accept and waste","Pay extra"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>7: ["Always give plastic cutlery","Ask if they need cutlery; offer compostable option","Hide cutlery","Charge more for food"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>8: ["Ignore alarm","Check seals, service fridge, log temps","Turn fridge off","Move everything outside"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>9: ["Continue using paper towels","Use washable cloths and reduce paper","Use more paper","Stop cleaning"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>10: ["Throw away immediately","Label and offer discounted item or donate if safe","Keep unrefrigerated","Sell at full price next week"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>11: ["Keep ordering by air","Look for sea freight or local spices","Order more samples","Stop using spices"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>12: ["Refuse smaller portions","Offer flexible portioning or sell by weight","Force customers to buy large","Increase price"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>13: ["Pour into drain","Collect fats for recycling; avoid drains","Use more hot water","Dissolve fats chemically"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>14: ["Leave labels as is","Add clear recycling icons and info","Remove labels","Print more labels"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>15: ["Keep old machines","Invest in energy-efficient equipment and maintenance","Ignore machines","Use them more hours"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>16: ["Ignore droppings","Isolate stock, call pest control, check hygiene","Throw all goods away","Use pesticides without check"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>17: ["Accept without question","Request animal welfare docs and prefer certified suppliers","Say it's fine","Buy more"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>18: ["Ignore requests","Create plant-based options","Tell customers to look elsewhere","Stop offering meat"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>19: ["Keep many small deliveries","Consolidate deliveries and optimize routes","Add more drivers","Order randomly"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>20: ["Throw bones away","Use bones for stock or partners","Burn bones","Sell bones without use"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>21: ["Do nothing","Train staff and label bins","Hire new staff","Stop waste separation"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>22: ["Throw overproduced food","Contact customer, offer discount, convert to meals","Ignore","Give to staff only"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>23: ["Print all receipts","Ask before printing and offer digital receipt","Charge for receipts","Hide receipts"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>24: ["Use same plastic wrap","Introduce reusable trays/compostable wraps","Use more plastic","Stop wrapping"],</p>
<p class="p1"><span class="Apple-converted-space">  </span>25: ["Refuse farm produce","Set preorder and seasonal menu; communicate variability","Accept without plan","Sell without label"]</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>App state</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">let currentLevel = null;</p>
<p class="p1">let currentSituationIndex = null; // index in baseSituations array</p>
<p class="p1">let answered = 0;</p>
<p class="p1">let correct = 0;</p>
<p class="p1">let partial = 0;</p>
<p class="p1">let wrong = 0;</p>
<p class="p1">let mcSelected = null;</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Helpers: DOM elements</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">const buttons = document.querySelectorAll('.level-btn');</p>
<p class="p1">const helpContent = document.getElementById('helpContent');</p>
<p class="p1">const helpIntro = document.getElementById('helpIntro');</p>
<p class="p1">const levelName = document.getElementById('levelName');</p>
<p class="p1">const levelDesc = document.getElementById('levelDesc');</p>
<p class="p1">const situationBox = document.getElementById('situationBox');</p>
<p class="p1">const mcArea = document.getElementById('mcArea');</p>
<p class="p1">const answerField = document.getElementById('answer');</p>
<p class="p1">const evalBtn = document.getElementById('evalBtn');</p>
<p class="p1">const nextBtn = document.getElementById('nextBtn');</p>
<p class="p1">const solutionBox = document.getElementById('solutionBox');</p>
<p class="p1">const ratingBox = document.getElementById('ratingBox');</p>
<p class="p1">const statsBox = document.getElementById('statsBox');</p>
<p class="p1">const autoScore = document.getElementById('autoScore');</p>
<p class="p1">const helpCard = document.getElementById('helpCard');</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Event: level selection</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">buttons.forEach(b=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>b.addEventListener('click',()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>const levelKey = b.getAttribute('data-level');</p>
<p class="p1"><span class="Apple-converted-space">    </span>selectLevel(levelKey);</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">function selectLevel(key){</p>
<p class="p1"><span class="Apple-converted-space">  </span>currentLevel = levels[key];</p>
<p class="p1"><span class="Apple-converted-space">  </span>levelName.textContent = currentLevel.name;</p>
<p class="p1"><span class="Apple-converted-space">  </span>levelDesc.textContent = currentLevel.description;</p>
<p class="p1"><span class="Apple-converted-space">  </span>helpIntro.textContent = currentLevel.helpIntro;</p>
<p class="p1"><span class="Apple-converted-space">  </span>// auto display situational help for the selected level (context-sensitive)</p>
<p class="p1"><span class="Apple-converted-space">  </span>helpContent.style.display='block';</p>
<p class="p1"><span class="Apple-converted-space">  </span>// clear and render initial help text (first situation help will replace)</p>
<p class="p1"><span class="Apple-converted-space">  </span>helpContent.innerHTML = '&lt;em&gt;Language help tailored to each situation will appear here.&lt;/em&gt;';</p>
<p class="p1"><span class="Apple-converted-space">  </span>// reset stats &amp; UI</p>
<p class="p1"><span class="Apple-converted-space">  </span>answered=0;correct=0;partial=0;wrong=0;updateStats();</p>
<p class="p1"><span class="Apple-converted-space">  </span>solutionBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>ratingBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>autoScore.textContent='';</p>
<p class="p1"><span class="Apple-converted-space">  </span>answerField.value='';</p>
<p class="p1"><span class="Apple-converted-space">  </span>mcArea.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>nextBtn.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>// show first random situation</p>
<p class="p1"><span class="Apple-converted-space">  </span>loadNewSituation();</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Load new situation &amp; render level-specific prompts/help</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">function loadNewSituation(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>// pick a random situation index from baseSituations</p>
<p class="p1"><span class="Apple-converted-space">  </span>currentSituationIndex = Math.floor(Math.random()*baseSituations.length);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const s = baseSituations[currentSituationIndex];</p>
<p class="p1"><span class="Apple-converted-space">  </span>situationBox.textContent = s.text;</p>
<p class="p1"><span class="Apple-converted-space">  </span>solutionBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>ratingBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>autoScore.textContent='';</p>
<p class="p1"><span class="Apple-converted-space">  </span>answerField.value='';</p>
<p class="p1"><span class="Apple-converted-space">  </span>mcSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>// If level is A1 and within first N mcCount, show MC or possibly free write depending on index</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(currentLevel.code === 'A1' &amp;&amp; currentSituationIndex &lt; currentLevel.mcCount){</p>
<p class="p1"><span class="Apple-converted-space">    </span>// show MC options from mcOptions</p>
<p class="p1"><span class="Apple-converted-space">    </span>const entry = mcOptions[s.id];</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(entry){</p>
<p class="p1"><span class="Apple-converted-space">      </span>mcArea.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>entry.forEach((opt, idx)=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">        </span>const div = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.className = 'mc-option';</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.setAttribute('data-idx', idx);</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.tabIndex = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.innerText = opt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.addEventListener('click', ()=&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>// select</p>
<p class="p1"><span class="Apple-converted-space">          </span>mcArea.querySelectorAll('.mc-option').forEach(o=&gt;o.classList.remove('selected'));</p>
<p class="p1"><span class="Apple-converted-space">          </span>div.classList.add('selected');</p>
<p class="p1"><span class="Apple-converted-space">          </span>mcSelected = idx;</p>
<p class="p1"><span class="Apple-converted-space">          </span>// if MC selected, also fill answerField with a short note (optional)</p>
<p class="p1"><span class="Apple-converted-space">          </span>answerField.value = opt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>mcArea.appendChild(div);</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">      </span>mcArea.style.display='flex';</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">      </span>mcArea.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">    </span>// hide mc area for other levels and for A1 free-writing items</p>
<p class="p1"><span class="Apple-converted-space">    </span>mcArea.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>// show language help tailored to this situation and level</p>
<p class="p1"><span class="Apple-converted-space">  </span>renderLanguageHelp(s);</p>
<p class="p1"><span class="Apple-converted-space">  </span>nextBtn.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>evalBtn.style.display='inline-block';</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Render language help per situation and per level</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">function renderLanguageHelp(situationObj){</p>
<p class="p1"><span class="Apple-converted-space">  </span>// basic vocabulary and starters per level, contextualized with situation</p>
<p class="p1"><span class="Apple-converted-space">  </span>const base = situationObj.text;</p>
<p class="p1"><span class="Apple-converted-space">  </span>let html = '';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(currentLevel.code === 'A1'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Goal:&lt;/strong&gt; Write short notes or choose the correct option.&lt;br/&gt;&lt;strong&gt;Starters:&lt;/strong&gt;&lt;ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Use less ... (plastic / energy / water)&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Buy local ... (meat / products)&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Don’t waste ... (food / packaging)&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Check ... (temperature / date)&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;/ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Quick tip:&lt;/strong&gt; Write 1–3 short bullet points. Example: &lt;em&gt;use paper instead of plastic&lt;/em&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;hr/&gt;&lt;div class="small"&gt;&lt;strong&gt;Context hint:&lt;/strong&gt; ${contextHint(base)}&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>} else if(currentLevel.code === 'B1'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Goal:&lt;/strong&gt; Write short reasoned notes. Use connectors like &lt;em&gt;because / to reduce / instead of&lt;/em&gt;.&lt;br/&gt;&lt;strong&gt;Frames:&lt;/strong&gt;&lt;ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Reduce ___ because it wastes energy.&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Use ___ instead of ___.&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Buy from ___ to support local farms.&lt;/li&gt;&lt;/ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Context hint:&lt;/strong&gt; ${contextHint(base)}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>} else if(currentLevel.code === 'B2'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Goal:&lt;/strong&gt; Formulate precise steps and short justification. Use professional vocabulary.&lt;br/&gt;&lt;strong&gt;Patterns:&lt;/strong&gt;&lt;ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Implement ___ to minimize environmental impact.&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Optimize ___ to reduce waste/emissions/costs.&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Ensure that ___ is sourced locally and ethically.&lt;/li&gt;&lt;/ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Context hint:&lt;/strong&gt; ${contextHint(base)}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Goal:&lt;/strong&gt; Provide a strategic, nuanced response. Show trade-offs and stakeholders.&lt;br/&gt;&lt;strong&gt;Style:&lt;/strong&gt;&lt;ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Introduce a system to track and reduce waste.&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Align sourcing strategy with ethical suppliers.&lt;/li&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;li&gt;Prioritize measures with clear ROI and social implications.&lt;/li&gt;&lt;/ul&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html += `&lt;strong&gt;Context hint:&lt;/strong&gt; ${contextHint(base)}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>helpContent.innerHTML = html;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* small helper to produce a short context hint based on situation text */</p>
<p class="p1">function contextHint(text){</p>
<p class="p1"><span class="Apple-converted-space">  </span>// try to use a few keywords extracted</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(text.toLowerCase().includes('local')) return 'Emphasize local sourcing where possible; tell customers where the product comes from.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(text.toLowerCase().includes('expiry') || text.toLowerCase().includes('expiry') ) return 'Check dates, consider discounting, repurposing or donation under safety rules.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(text.toLowerCase().includes('packaging') || text.toLowerCase().includes('packaging')) return 'Consider asking suppliers for reusable containers or switching to recyclable materials.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(text.toLowerCase().includes('lights') || text.toLowerCase().includes('fridge') ) return 'Minor technical fixes can yield energy savings—check timers, seals and bulbs.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(text.toLowerCase().includes('trims') || text.toLowerCase().includes('leftover')) return 'Repurpose trims into sausages, stock or partner with charities where safe.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(text.toLowerCase().includes('deliver')) return 'Consolidate deliveries and coordinate with suppliers to reduce transport footprint.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>// default generic hint</p>
<p class="p1"><span class="Apple-converted-space">  </span>return 'Think: immediate safety (dates, temperature), then waste reduction (repurpose, discount, donate), then supplier/labeling changes.';</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Evaluate button behavior</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">evalBtn.addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(!currentLevel){ alert('Please select a level first.'); return; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>const s = baseSituations[currentSituationIndex];</p>
<p class="p1"><span class="Apple-converted-space">  </span>// Show suggested solution</p>
<p class="p1"><span class="Apple-converted-space">  </span>solutionBox.innerHTML = `&lt;strong&gt;Suggested action(s):&lt;/strong&gt;&lt;div style="margin-top:8px"&gt;${s.solution}&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>solutionBox.style.display='block';</p>
<p class="p1"><span class="Apple-converted-space">  </span>// Compute simple keyword matching score as orientation</p>
<p class="p1"><span class="Apple-converted-space">  </span>const userText = (answerField.value || '').toLowerCase();</p>
<p class="p1"><span class="Apple-converted-space">  </span>const keyWords = extractKeywords(s.solution);</p>
<p class="p1"><span class="Apple-converted-space">  </span>let matches = 0;</p>
<p class="p1"><span class="Apple-converted-space">  </span>keyWords.forEach(k=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(k &amp;&amp; userText.includes(k) ) matches++;</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>// if Level1 and MC visible, give MC auto check</p>
<p class="p1"><span class="Apple-converted-space">  </span>let mcInfo = '';</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(currentLevel.code === 'A1' &amp;&amp; mcArea.style.display !== 'none'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>// find correct option index from mcOptions: we derive correct by comparing option text to solution if possible</p>
<p class="p1"><span class="Apple-converted-space">    </span>const opts = mcOptions[s.id];</p>
<p class="p1"><span class="Apple-converted-space">    </span>let correctIdx = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(opts){</p>
<p class="p1"><span class="Apple-converted-space">      </span>for(let i=0;i&lt;opts.length;i++){</p>
<p class="p1"><span class="Apple-converted-space">        </span>if( opts[i].toLowerCase().includes( trimToKey(s.solution).toLowerCase().split(' ')[0] ) || opts[i].toLowerCase() === s.solution.toLowerCase() ){</p>
<p class="p1"><span class="Apple-converted-space">          </span>correctIdx = i; break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>// fallback mapping by known answers: we will check answer by textual match</p>
<p class="p1"><span class="Apple-converted-space">      </span>// But the data was arranged so that the second option is usually correct for these MCs (see construction)</p>
<p class="p1"><span class="Apple-converted-space">      </span>if(correctIdx === null) correctIdx = 1;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if(mcSelected===null){</p>
<p class="p1"><span class="Apple-converted-space">        </span>mcInfo = `&lt;div class="small" style="margin-top:8px;color:#b00"&gt;No choice selected. Select an option next time or type a short note before evaluation.&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if(mcSelected === correctIdx){</p>
<p class="p1"><span class="Apple-converted-space">          </span>mcInfo = `&lt;div class="small" style="margin-top:8px;color:green"&gt;MC: Your choice looks correct.&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">          </span>mcInfo = `&lt;div class="small" style="margin-top:8px;color:#b00"&gt;MC: Selected option is not the suggested one.&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>autoScore.innerHTML = `Score hint: ${matches}/${keyWords.length} keywords found. ${mcInfo}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>ratingBox.style.display='block';</p>
<p class="p1"><span class="Apple-converted-space">  </span>nextBtn.style.display='inline-block';</p>
<p class="p1"><span class="Apple-converted-space">  </span>evalBtn.style.display='none';</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">/* small keyword extractor: split solution into important 'roots' */</p>
<p class="p1">function extractKeywords(sol){</p>
<p class="p1"><span class="Apple-converted-space">  </span>// split on punctuation and some common words</p>
<p class="p1"><span class="Apple-converted-space">  </span>return sol.toLowerCase().replace(/[,.;]/g,'').split(' ').filter(w=&gt;w.length&gt;3 &amp;&amp; !['that','will','and','with','the','for','your','a','to','or','of','in'].includes(w));</p>
<p class="p1">}</p>
<p class="p1">function trimToKey(s){ return s.split(/[.;,]/)[0]; }</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Next situation button</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">nextBtn.addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>evalBtn.style.display='inline-block';</p>
<p class="p1"><span class="Apple-converted-space">  </span>nextBtn.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>solutionBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>ratingBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>autoScore.textContent='';</p>
<p class="p1"><span class="Apple-converted-space">  </span>mcArea.querySelectorAll('.mc-option')?.forEach(o=&gt;o.classList.remove('selected'));</p>
<p class="p1"><span class="Apple-converted-space">  </span>mcSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>loadNewSituation();</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Rating buttons</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">document.getElementById('resRight').addEventListener('click', ()=&gt; registerResult('correct'));</p>
<p class="p1">document.getElementById('resPartial').addEventListener('click', ()=&gt; registerResult('partial'));</p>
<p class="p1">document.getElementById('resWrong').addEventListener('click', ()=&gt; registerResult('wrong'));</p>
<p class="p2"><br></p>
<p class="p1">function registerResult(type){</p>
<p class="p1"><span class="Apple-converted-space">  </span>answered++; if(type==='correct') correct++; if(type==='partial') partial++; if(type==='wrong') wrong++;</p>
<p class="p1"><span class="Apple-converted-space">  </span>updateStats();</p>
<p class="p1"><span class="Apple-converted-space">  </span>// Emoji reward on correct</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(type==='correct') shootEmojis();</p>
<p class="p1"><span class="Apple-converted-space">  </span>// auto advance after a short delay to next situation</p>
<p class="p1"><span class="Apple-converted-space">  </span>setTimeout(()=&gt;{ nextBtn.click(); }, 700);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function updateStats(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>statsBox.textContent = `Answered: ${answered} | Correct: ${correct} | Partly: ${partial} | Wrong: ${wrong}`;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Emoji animation (flying emojis across screen)</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">function shootEmojis(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const emojis = ['🥩','🧠','🌱','🥇','🍖','🍗','🌍','🎉'];</p>
<p class="p1"><span class="Apple-converted-space">  </span>const count = 14;</p>
<p class="p1"><span class="Apple-converted-space">  </span>for(let i=0;i&lt;count;i++){</p>
<p class="p1"><span class="Apple-converted-space">    </span>const el = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">    </span>el.className = 'emoji';</p>
<p class="p1"><span class="Apple-converted-space">    </span>el.innerText = emojis[Math.floor(Math.random()*emojis.length)];</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.body.appendChild(el);</p>
<p class="p1"><span class="Apple-converted-space">    </span>// random horizontal start</p>
<p class="p1"><span class="Apple-converted-space">    </span>const startX = Math.random() * (window.innerWidth - 60) + 20;</p>
<p class="p1"><span class="Apple-converted-space">    </span>el.style.left = startX + 'px';</p>
<p class="p1"><span class="Apple-converted-space">    </span>el.style.top = (window.innerHeight * 0.15 + Math.random()*40) + 'px';</p>
<p class="p1"><span class="Apple-converted-space">    </span>// animate: up-left or up-right bezier-like with transform</p>
<p class="p1"><span class="Apple-converted-space">    </span>const xDir = (Math.random()&gt;.5) ? (Math.random()*200 + 60) : -(Math.random()*200 + 60);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const rotate = (Math.random()&gt;.5) ? 180 : -180;</p>
<p class="p1"><span class="Apple-converted-space">    </span>// trigger animation via requestAnimationFrame</p>
<p class="p1"><span class="Apple-converted-space">    </span>requestAnimationFrame(()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.style.opacity = '1';</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.style.transform = `translate(${xDir}px,-${600 + Math.random()*180}px) rotate(${rotate}deg)`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>// remove after animation</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTimeout(()=&gt;{ el.remove(); }, 1600 + Math.random()*400);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* -------------------------</p>
<p class="p1"><span class="Apple-converted-space">   </span>Init: show nothing until level chosen</p>
<p class="p1"><span class="Apple-converted-space">   </span>------------------------- */</p>
<p class="p1">(function init(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>// nothing selected yet</p>
<p class="p1"><span class="Apple-converted-space">  </span>levelName.textContent = 'Please choose a level';</p>
<p class="p1"><span class="Apple-converted-space">  </span>levelDesc.textContent = 'Language help will appear for the chosen level and situation.';</p>
<p class="p1"><span class="Apple-converted-space">  </span>helpContent.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>solutionBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>ratingBox.style.display='none';</p>
<p class="p1"><span class="Apple-converted-space">  </span>mcArea.style.display='none';</p>
<p class="p1">})();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
